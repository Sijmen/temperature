GraphTile=Class.create(Tile,{initialize:function($super,a,b,c){var d=this;$super(a,c);this.oOptions=$.extend(true,{timespan:300,smoothScale:1,timespanType:"time",serie:{name:"serie1",data:[],color:"#c05020"},graphOptions:{min:"auto",renderer:"area"}},this.oOptions);
this.sSelector=a;this.bRendered=false;this.oGraph=null;this.oDataProvider=b;this.aSeries=[];this.oSerie=this.oOptions.serie;this.aSeries.push(this.oSerie);
if(this.oOptions.timespanType!=="time"&&this.oOptions.timespanType!=="data"){throw"Timespan option can only be defined as 'time' or 'data', Actual value: "+this.oOptions.timespanType;
}if(typeof d.oOptions.range!=="undefined"){d.oDataProvider.vRequestGraphRangeData(d.oOptions.range,function(e){d.vReceiveInitialData(d,e);});}},vReceiveInitialData:function(b,a){b.vAddData(a);
},vAddData:function(a){var b=this;b.oSerie.data.push(a);b.vUpdate();},oGetSeries:function(){return this.aSeries;},oGetSerie:function(a){return this.aSeries[a];
},vRender:function(){if(this.bRendered){this.vUpdate();}this.oGraph=new Rickshaw.Graph($.extend(true,{element:document.querySelector(this.sSelector),renderer:"area",width:$(this.sSelector).parent().innerWidth(),height:350,min:"auto",padding:{top:0.1,bottom:0.1},stroke:false,series:this.aSeries},this.oOptions.graphOptions));
this.hoverDetail=new Rickshaw.Graph.HoverDetail({graph:this.oGraph});this.smoother=new Rickshaw.Graph.Smoother({graph:this.oGraph});this.smoother.setScale(this.oOptions.smoothScale);
this.xAxis=new Rickshaw.Graph.Axis.Time({graph:this.oGraph,timeFixture:new Rickshaw.Fixtures.Time.Local()});this.yAxis=new Rickshaw.Graph.Axis.Y({graph:this.oGraph});
this.xAxis.render();this.oGraph.render();this.bRendered=true;},vUpdate:function(b,a){var c=this;if(c.oUpdateTimeout){clearInterval(c.oUpdateTimeout);}if(typeof b==="undefined"||!b){c.oUpdateTimeout=setTimeout(function(){c.vUpdate(true);
},10);}else{if(this.bRendered){this.oGraph.render();}else{this.vRender();}}},vSetSmooth:function(a){this.oOptions.smoothScale=a;},vResize:function(){this.oGraph.configure({width:$(this.sSelector).parent().innerWidth()});
this.vUpdate();},vSetTimespan:function(b,a){if(b>a){this.vSetTimespanSeconds(Math.round(b-a));}else{this.vSetTimespanSeconds(Math.round(a-b));}},vSetTimespanSeconds:function(a){this.iTimespan=a;
}});