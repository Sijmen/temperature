LiveGraphTile=Class.create(GraphTile,{initialize:function($super,a,b,c){$super(a,b,c);var d=this;this.bInitialData=false;this.oOptions=$.extend(this.oOptions,{timespan:300,smoothScale:1,timespanType:"time"},c);
if(typeof d.oOptions.range!=="undefined"){d.aInitialData=[];d.aBufferData=[];}else{this.bInitialData=true;}this.oDataProvider.vRegisterNewGraphs(function(e){if(d.bInitialData){d.vAddData(e);
}else{d.aBufferData.push(e);}});},vReceiveInitialData:function(b,a){b.vAddData(a);b.bInitialData=true;},vAddInitialData:function(a){var b=this;b.aInitialData.push(a);
if(b.oInitialDataTimeout){clearInterval(b.oInitialDataTimeout);}b.oInitialDataTimeout=setTimeout(function(){$.each(b.aInitialData,function(d,c){b.oSerie.data.push(c);
});b.aInitialData=[];$.each(b.aBufferData,function(d,c){b.oSerie.data.push(c);});b.aBufferData=[];},100);},vAddData:function(b){var c=this;c.oSerie.data.push(b);
if(c.oOptions.timespanType==="data"){c.oSerie.data.shift();}if(c.oOptions.timespanType==="time"){iLatestTime=b.x-c.oOptions.timespan;var a=false;while(!a){if(c.oSerie.data[0].x<iLatestTime){c.oSerie.data.shift();
}else{a=true;}}}c.vUpdate();}});