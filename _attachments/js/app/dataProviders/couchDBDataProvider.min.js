Rx.Observable.fromCouchDB=function(b){var a=Rx.Observable.create(function(d){var f=false;var c=null;$.couch.db(b.name).info({success:function(h){recentUpdateSeq=h.update_seq-50;
var g={feed:"normal",since:recentUpdateSeq,include_docs:true};$.getJSON("/"+b.name+"/_changes?"+decodeURIComponent($.param(g)),function(i){if(i.results.length){$.each(i.results,function(k,j){d.onNext(j);
});}e(i.last_seq);});}});function e(g){if(!f){c=b.changes(g,{include_docs:true});f=true;c.onChange(function(h){$.each(h.results,function(j,i){d.onNext(i);
});});}}return function(){};}).map(function(c){return c.doc;}).publish();a.connect();return a;};Rx.Observable.fromCouchDBView=function(d,a){var c=this;
if(!a){throw"options must be given, no default available";}var b=Rx.Observable.create(function(e){d.view(a.designDoc+"/"+a.view,{startkey:[a.device,a.range.min],endkey:[a.device,a.range.max],reduce:false,update_seq:true,success:function(f){$.each(f.rows,function(g,h){e.onNext(h.value);
});e.onCompleted();},error:function(f){e.onError(f);}});return function(){};});return b;};